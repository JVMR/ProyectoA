PRAGMA FOREIGN_KEYS=ON;

CREATE TABLE ALUMNOS (
  alumnoId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  nombres TEXT(45) NOT NULL,
  apellidoPaterno TEXT(45) NOT NULL,
  apellidoMaterno TEXT(45) NOT NULL,
  email TEXT(50) NOT NULL
);

CREATE TABLE PROFESORES (
  profesorId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  nombres TEXT(45) NOT NULL,
  apellidoPaterno TEXT(45) NOT NULL,
  apellidoMaterno TEXT(45) NOT NULL,
  email TEXT(50) NOT NULL UNIQUE,
  username TEXT(15) NOT NULL UNIQUE,
  password TEXT(15) NOT NULL
);

CREATE TABLE CARRERAS (
  carreraId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(45) NOT NULL UNIQUE
);

CREATE TABLE CURSOS (
  cursoId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(45) NOT NULL UNIQUE
);

CREATE TABLE CARRERAS_CURSOS (
  carreraCursoId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  carreraId INTEGER NOT NULL REFERENCES CARRERAS(carreraId),
  cursoId INTEGER NOT NULL  REFERENCES CURSOS(cursoId),
  creditos INTEGER NOT NULL
);

CREATE TABLE  TIPO_AULA (
  tipoAulaId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(45) NULL
);

CREATE TABLE AULAS (
  aulaId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  tipoAulaId INTEGER NOT NULL REFERENCES TIPO_AULA(tipoAulaId)
);

CREATE TABLE DIAS (
  diaId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(15) NULL
);

CREATE TABLE SECCIONES (
  seccionId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(4) NULL
);

CREATE TABLE HORARIOS (
  horarioId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  cursoId INTEGER NOT NULL REFERENCES CURSOS(cursoId),
  profesorId INTEGER NOT NULL REFERENCES PROFESORES(profesorId),
  aulaId INTEGER NOT NULL REFERENCES AULAS(aulaId),
  horaInicio REAL(4,2) NOT NULL,
  horaFin REAL(4,2) NOT NULL,
  diaId INTEGER NOT NULL REFERENCES DIAS(diaId),
  seccionId INTEGER NOT NULL REFERENCES SECCIONES(seccionId),
  grupo TEXT(2) NOT NULL
);

CREATE TABLE ESTADOS (
  estadoId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descricpion TEXT(45) NULL
);

CREATE TABLE ALUMNOS_HORARIOS (
  alumnoHorarioId INTEGER  NOT NULL PRIMARY KEY AUTOINCREMENT,
  alumnoId INTEGER NOT NULL REFERENCES ALUMNOS(alumnoId),
  horarioId INTEGER NOT NULL REFERENCES HORARIOS(horarioId),
  estadoId INTEGER NOT NULL REFERENCES ESTADOS(estadoId)
);

CREATE TABLE EVALUACIONES (
  evaluacionId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(45) NOT NULL
);

CREATE TABLE CURSOS_EVALUACIONES (
  cursoEvaluacionId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  cursoId INTEGER NOT NULL REFERENCES CURSOS(cursoId),
  evaluacionesId INTEGER NOT NULL REFERENCES EVALUACIONES(evaluacionId),
  porcentaje INTEGER NULL
);

CREATE TABLE  CALIFICACIONES (
  calificacionId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  descripcion TEXT(10) NULL,
  nota INTEGER NOT NULL
);

CREATE TABLE REGISTRO_NOTAS (
  registroNotaId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  alumnoId INTEGER NOT NULL REFERENCES ALUMNOS(alumnoId),
  cursoId INTEGER NOT NULL REFERENCES CURSOS(cursoId),
  evaluacionId INTEGER NOT NULL REFERENCES EVALUACIONES(evaluacionId),
  calificacionesId INTEGER NOT NULL REFERENCES CALIFICACIONES(calificacionesId)
);
